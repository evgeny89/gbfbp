import React, {useEffect, useState} from "react";
import axios from "axios";
import routes from "../routes";

function PopupUserComponent() {
    const [userData, setUserData] = useState();

    useEffect(async () => {
        const data = await axios.get(routes.popup).then(r => r.data);
        setUserData(data);
    }, []);

    return (
        <div className="react-popup">
            <header className="user-popup">
                <div className="user-popup__avatar">
                    {userData?.avatar
                        ? <img src={userData?.avatar} alt={userData?.userName} width="100" height="100"/>
                        : userData?.userName
                    }
                </div>
                <div className="user-popup__info">
                    <p className="user-popup__name">{userData?.userName}</p>
                    <a href={userData?.profileLink} className="user-popup__profile-link">Личные данные</a>
                </div>
            </header>
            <ul className="user-popup__links">
                <a href={userData?.favoriteLink} className="user-popup__link">
                    <svg width="34" height="30" viewBox="0 0 34 30" xmlns="http://www.w3.org/2000/svg" className="user-popup__icon">
                        <path d="M25.0133 0C21.5396 0 18.9111 1.9489 16.6756 3.98542C14.5453 1.82433 11.8115 0 8.33778 0C3.44557 0 0 4.02126 0 8.40627C0 10.7587 1.00784 12.4535 2.11153 14.0446L15.0695 28.8963C16.5244 30.3679 16.7986 30.3679 18.2535 28.8963L31.2406 14.0446C32.5382 12.4535 33.3511 10.7587 33.3511 8.40627C33.3511 4.02131 29.9055 0 25.0133 0ZM29.1822 13.6322L16.6756 27.8979L4.16889 13.5733C2.67332 11.5856 2.08445 10.2446 2.08445 8.40627C2.08445 4.98078 4.64311 1.89706 8.33778 1.86815C11.3769 1.84423 14.8215 4.81137 16.6756 7.0482C18.4807 4.88909 21.9742 1.86815 25.0133 1.86815C28.61 1.86815 31.2667 4.98078 31.2667 8.40627C31.2667 10.2446 30.8008 11.6852 29.1822 13.6322Z"/>
                    </svg>
                    избранное
                </a>
                <a href={userData?.purchasesLink} className="user-popup__link">
                    <svg width="26" height="30" viewBox="0 0 26 30" xmlns="http://www.w3.org/2000/svg" className="user-popup__icon">
                        <path d="M25.895 22.3491V7.63207C25.9066 7.56594 25.9018 7.50117 25.8923 7.43572C25.8916 7.3314 25.8766 7.22709 25.8193 7.13028C25.7191 6.96119 25.5473 6.87802 25.3646 6.84393L19.6103 3.63545C19.5039 3.51273 19.3642 3.435 19.2067 3.41114L13.4231 0.1863C13.2117 -0.00937195 12.892 -0.0639147 12.6254 0.0853961L0.528507 6.84665C0.349879 6.88279 0.182842 6.9646 0.084665 7.12959C0.0273951 7.22641 0.012396 7.33004 0.0117142 7.43367C0.00148741 7.49912 -0.00260338 7.56457 0.00830517 7.63071V22.3477C-0.0114666 22.4643 0.00489626 22.5788 0.0485305 22.6872C0.120118 22.9184 0.306927 23.0881 0.545551 23.1413L12.4816 29.8132C12.6929 30.0089 13.0127 30.0641 13.2792 29.9148L25.3686 23.1393C25.6011 23.0834 25.7825 22.9177 25.8548 22.6913C25.8977 22.5822 25.9154 22.467 25.895 22.3491ZM12.9356 1.42238L17.6993 4.07861L6.85274 10.1574L2.08093 7.49026L12.9356 1.42238ZM12.2709 28.1851L1.37051 22.092V8.60429L6.31618 11.3682C6.41708 11.478 6.54457 11.551 6.68843 11.5769L12.2702 14.6974V28.1851H12.2709ZM12.9683 13.5752L8.20745 10.9135L19.056 4.83403L23.823 7.49162L12.9683 13.5752ZM24.5335 22.0927L13.6338 28.2008V14.7172L24.5335 8.60907V22.0927ZM15.6778 21.1253C15.7882 21.1253 15.8891 21.0925 15.9812 21.0455C15.9825 21.0448 15.9839 21.0448 15.9852 21.0441L19.4269 18.9736C19.6253 18.8542 19.7651 18.647 19.7651 18.3981V14.3074C19.7651 13.9304 19.4596 13.6256 19.0833 13.6256C18.9756 13.6256 18.8767 13.6563 18.786 13.7006C18.7806 13.704 18.7737 13.7034 18.769 13.7068L15.3294 15.7801C15.1337 15.9001 14.996 16.1067 14.996 16.3528V20.4435C14.996 20.8205 15.3014 21.1253 15.6778 21.1253ZM16.3589 16.7305L18.4022 15.5108V18.017L16.3589 19.2374V16.7305Z"/>
                    </svg>
                    Покупки
                </a>
                <a href={userData?.shopLink} className="user-popup__link">
                    <svg width="30" height="30" viewBox="0 0 30 30" xmlns="http://www.w3.org/2000/svg" className="user-popup__icon">
                        <path d="M0 12.1875C0 13.9325 1.19754 15.3864 2.8125 15.8057V28.125H0.9375C0.421113 28.125 0 28.5443 0 29.0625C0 29.5807 0.421172 30 0.9375 30H29.0625C29.5825 30 30 29.5807 30 29.0625C30 28.5443 29.5825 28.125 29.0625 28.125H27.1875V15.8057C28.8025 15.3864 30 13.9325 30 12.1875V11.25H0V12.1875ZM18.75 15.9375C20.8228 15.9375 22.5 14.2584 22.5 12.1875C22.5 13.9325 23.6975 15.3864 25.3125 15.8057V28.125H11.25V15.9375C13.3228 15.9375 15 14.2584 15 12.1875C15 14.2584 16.6809 15.9375 18.75 15.9375ZM10.3125 15.8057V28.125H4.6875V15.8057C6.30252 15.3864 7.5 13.9325 7.5 12.1875C7.5 13.9325 8.69754 15.3864 10.3125 15.8057ZM26.25 2.8125H3.75L0 10.3125H30L26.25 2.8125ZM7.92117 4.89627L6.04617 8.64627C5.96191 8.81109 5.79715 8.90631 5.625 8.90631C5.55539 8.90631 5.48402 8.89166 5.41623 8.85686C5.18549 8.74148 5.09027 8.45953 5.20746 8.22879L7.08246 4.47879C7.19965 4.24805 7.47979 4.15471 7.71053 4.2682C7.94314 4.38357 8.03467 4.66553 7.92117 4.89627ZM11.6712 4.89627L9.79617 8.64627C9.71191 8.81109 9.54715 8.90631 9.375 8.90631C9.30539 8.90631 9.23402 8.89166 9.16623 8.85686C8.93549 8.74148 8.84027 8.45953 8.95746 8.22879L10.8325 4.47879C10.9496 4.24805 11.2317 4.15471 11.4605 4.2682C11.6931 4.38357 11.7847 4.66553 11.6712 4.89627ZM15.4688 8.4375C15.4688 8.69754 15.26 8.90625 15 8.90625C14.7418 8.90625 14.5312 8.69748 14.5312 8.4375V4.6875C14.5312 4.42746 14.7418 4.21875 15 4.21875C15.26 4.21875 15.4688 4.42752 15.4688 4.6875V8.4375ZM20.8521 8.84766C20.7788 8.88797 20.7019 8.90625 20.625 8.90625C20.4602 8.90625 20.2991 8.81836 20.2148 8.66273L18.1641 4.91273C18.0396 4.68568 18.1237 4.40004 18.3509 4.27734C18.5743 4.15283 18.8636 4.2334 18.9881 4.46227L21.0388 8.21227C21.1597 8.43932 21.0791 8.72496 20.8521 8.84766ZM24.5837 8.8568C24.5179 8.8916 24.4482 8.90625 24.375 8.90625C24.2029 8.90625 24.0381 8.81104 23.9575 8.64621L22.0825 4.89621C21.9653 4.66547 22.0605 4.38352 22.2912 4.26814C22.5183 4.15277 22.8039 4.24617 22.9211 4.47873L24.7961 8.22873C24.9097 8.45947 24.8181 8.74148 24.5837 8.8568ZM7.96875 22.6429V20.4822C7.69406 20.3174 7.5 20.0317 7.5 19.6876C7.5 19.1694 7.92117 18.7501 8.4375 18.7501C8.95752 18.7501 9.375 19.1694 9.375 19.6876C9.375 20.0318 9.18275 20.3174 8.90625 20.4822V22.6429C9.18275 22.8077 9.375 23.0933 9.375 23.4376C9.375 23.9558 8.95752 24.3751 8.4375 24.3751C7.92111 24.3751 7.5 23.9558 7.5 23.4376C7.5 23.0933 7.69412 22.8076 7.96875 22.6429ZM3.75 0.9375C3.75 0.419297 4.17117 0 4.6875 0H25.3125C25.8325 0 26.25 0.419297 26.25 0.9375C26.25 1.4557 25.8325 1.875 25.3125 1.875H4.6875C4.17117 1.875 3.75 1.4557 3.75 0.9375ZM16.4319 20.9564L15.7691 20.2935L18.4205 17.6422L19.0833 18.305L16.4319 20.9564ZM16.4319 23.6078L15.7691 22.9449L21.0718 17.6422L21.7346 18.305L16.4319 23.6078ZM21.0718 20.2936L21.7346 20.9565L19.0832 23.6078L18.4204 22.945L21.0718 20.2936Z"/>
                    </svg>
                    моя витрина
                </a>
            </ul>
            <a href={userData?.logoutLink} className="user-popup__logout-link">выйти</a>
        </div>
    );
}

export default PopupUserComponent;
